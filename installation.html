
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; media-nommer v1.0dev documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="media-nommer v1.0dev documentation" href="index.html" />
    <link rel="next" title="feederd" href="feederd.html" />
    <link rel="prev" title="An Introduction to media-nommer" href="introduction.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="feederd.html" title="feederd"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="An Introduction to media-nommer"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">media-nommer v1.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>Installation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Due to the early state of this project, there is a good chance that parts of
these instructions are out of date at any given time. If you run into any such
issue please let us know on our <a class="reference external" href="https://github.com/duointeractive/media-nommer/issues">issue tracker</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following instructions are directed at what your eventual production
environment will need. See <a class="reference internal" href="hacking.html"><em>Hacking on media-nommer</em></a> for details on setting up
a development environment.</p>
</div>
<div class="section" id="assumptions">
<h2>Assumptions<a class="headerlink" href="#assumptions" title="Permalink to this headline">¶</a></h2>
<p>For the sake of sanity, good deployment practices, and uniformity, we&#8217;re
going to make some assumptions. It is perfectly fine if you&#8217;d like to deviate,
but it will be <em>much</em> more difficult for us to help you:</p>
<ul class="simple">
<li>You are deploying or developing media-nommer in a <a class="reference external" href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>. We highly
recommend that and <a class="reference external" href="http://www.doughellmann.com/projects/virtualenvwrapper/">virtualenvwrapper</a>.</li>
<li>You are running a flavor of Linux, BSD, Mac OS, or something POSIX compatible.
While Windows support is achievable, it&#8217;s not something we currently have
the resources to maintain (any takers?).</li>
<li>You have <a class="reference external" href="http://python.org">Python</a> 2.5 or later. <a class="reference external" href="http://python.org">Python</a> 2.6 or 2.7 is preferred. <a class="reference external" href="http://python.org">Python</a> 3.x is
not currently supported.</li>
<li>You have an <a class="reference external" href="http://aws.amazon.com/">Amazon AWS</a> account, and can create or destroy <a class="reference external" href="http://aws.amazon.com/s3/">S3</a> buckets.</li>
</ul>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Some flavor of Linux, Unix, BSD, Mac OS, or POSIX compliant OS.</li>
<li><a class="reference external" href="http://python.org">Python</a> 2.5 or higher, <a class="reference external" href="http://python.org">Python</a> 2.6 or 2.7 recommended. <a class="reference external" href="http://python.org">Python</a> 3.x is not
supported (yet).</li>
</ul>
</div>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>For the sake of clarity, the media-nommer Python package contains
the sources for <a class="reference internal" href="feederd.html"><em>feederd</em></a> and <a class="reference internal" href="ec2nommerd.html"><em>ec2nommerd</em></a>. You will want to install
this package on whatever machine you&#8217;d like to run <a class="reference internal" href="feederd.html"><em>feederd</em></a> on. You do
not need to do any setup work for <a class="reference internal" href="ec2nommerd.html"><em>ec2nommerd</em></a>, as those are ran on an
<a class="reference external" href="http://aws.amazon.com/ec2/">EC2</a> instance that is based off of an AMI that we have created for you.</p>
<p>Since we are not yet distributing media-nommer on PyPi, the easiest way is to
install the package is through <strong class="command">pip</strong>:</p>
<div class="highlight-python"><pre>pip install txrestapi twisted
pip install --upgrade git+http://github.com/duointeractive/media-nommer.git#egg=media_nommer</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don&#8217;t have access to <strong class="command">pip</strong>, you may download a tarball/zip,
from our <a class="reference external" href="https://github.com/duointeractive/media-nommer">GitHub project</a> and install via the enclosed <tt class="docutils literal"><span class="pre">setup.py</span></tt>. See
the <tt class="docutils literal"><span class="pre">requirements.txt</span></tt> within the project for dependencies.</p>
</div>
<p>We have to install Twisted before media-nommer because of an odd behavior
with <strong class="command">pip</strong>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Any time that you upgrade or re-install Twisted, you must also
re-install media-nommer.</p>
</div>
</div>
<div class="section" id="signing-up-for-aws">
<h2>Signing up for AWS<a class="headerlink" href="#signing-up-for-aws" title="Permalink to this headline">¶</a></h2>
<p>After you have installed the media-nommer Python package on your machine(s),
you&#8217;ll need to visit <a class="reference external" href="http://aws.amazon.com/">Amazon AWS</a> and sign up for the following services:</p>
<ul class="simple">
<li><a class="reference external" href="http://aws.amazon.com/simpledb/">SimpleDB</a></li>
<li><a class="reference external" href="http://aws.amazon.com/sqs/">SQS</a></li>
<li><a class="reference external" href="http://aws.amazon.com/ec2/">EC2</a></li>
</ul>
<p>It is important to understand that even if you already have an Amazon account,
you need to sign up to each of these services specifically for your account to
have access to said services. This is a very quick process, and typically
involves looking over an agreement and accepting it.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Signing up for these services is outside the scope of this document.
Please contact <a class="reference external" href="http://aws.amazon.com/">AWS</a> support with questions regarding this step. Their
community forums are also a great resource.</p>
</div>
<p>Fees are based on what you actually use, so signing up for these services will
incur no costs unless you use them.</p>
<p>You will need to create a <tt class="docutils literal"><span class="pre">media_nommer</span></tt> EC2 <em>Security Group</em> through the
<a class="reference external" href="http://aws.amazon.com/">AWS</a> management console for your <a class="reference external" href="http://aws.amazon.com/ec2/">EC2</a> instances to be part of.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Failure to create an EC2 security group will result in
media-nommer not being able to spawn EC2 instances, which means
no encoding for you.</p>
</div>
<p>You will also need to create an SSH key pair. Make sure to keep track of the
name of your key pair, as you will need this in the configuration stage.</p>
</div>
<div class="section" id="configuring">
<span id="installing-configuring"></span><h2>Configuring<a class="headerlink" href="#configuring" title="Permalink to this headline">¶</a></h2>
<p>Once media-nommer is installed, create a directory to store a few files in.
Within said directory, create a file called <tt class="file docutils literal"><span class="pre">nomconf.py</span></tt>. You will
want to add these settings values (at minimum):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The AWS SSH key pair to use for creating instances. This is just the</span>
<span class="c"># name of it, as per your Account Security Credentials panel on AWS.</span>
<span class="n">EC2_KEY_NAME</span> <span class="o">=</span> <span class="s">&#39;xxxxxxxxx&#39;</span>
<span class="c"># The AWS credentials used to access SimpleDB, SQS, and EC2.</span>
<span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s">&#39;YYYYYYYYYYYYYYYYYYYY&#39;</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s">&#39;ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ&#39;</span>

<span class="n">PRESETS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># A basic ffmpeg preset with no default options provided.</span>
    <span class="s">&#39;basic_ffmpeg&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;nommer&#39;</span><span class="p">:</span> <span class="s">&#39;media_nommer.ec2nommerd.nommers.ffmpeg.FFmpegNommer&#39;</span><span class="p">,</span>
        <span class="c"># This options dict will vary wildly depending on which</span>
        <span class="c"># Nommer you are using. This example only holds true for</span>
        <span class="c"># the FFmpegNommer</span>
        <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="c"># These are passed as infile options to ffmpeg</span>
            <span class="s">&#39;infile_options&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="c"># These are passed as outfile options to ffmpeg</span>
            <span class="s">&#39;outfile_options&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="p">}</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="apiref/conf.html#module-media_nommer.conf.settings" title="media_nommer.conf.settings"><tt class="xref py py-mod docutils literal"><span class="pre">media_nommer.conf.settings</span></tt></a> for a full list of settings (and their
defaults) that you may override in your <tt class="file docutils literal"><span class="pre">nomconf.py</span></tt>.</p>
</div>
<div class="section" id="presets">
<h2>Presets<a class="headerlink" href="#presets" title="Permalink to this headline">¶</a></h2>
<p>Presets are ways to shorten and simplify your job submission API calls. They
also make <a class="reference internal" href="ec2nommerd.html#nommers"><em>Nommers</em></a> available via the <a class="reference internal" href="jsonapi.html"><em>JSON API</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Encoding jobs are submitted through the <a class="reference internal" href="jsonapi.html"><em>JSON API</em></a>
by specifying a preset to use, instead of referring to a
<a class="reference internal" href="ec2nommerd.html#nommers"><em>Nommer</em></a> directly. If you want to make a
<a class="reference internal" href="ec2nommerd.html#nommers"><em>Nommer</em></a> available through the <a class="reference internal" href="jsonapi.html"><em>JSON API</em></a>,
you will need a preset key containing a dict with a
<tt class="docutils literal"><span class="pre">nommer</span></tt> key pointing to the nommer&#8217;s class (as in the example in the
<em>Configuring</em> section).</p>
</div>
<p>At the very least, you&#8217;ll need to add a basic preset to for each of the
<a class="reference internal" href="ec2nommerd.html#nommers"><em>Nommers</em></a> you&#8217;d like to use. Specifying the <tt class="docutils literal"><span class="pre">options</span></tt> dict
is completely optional, and may be overridden in your API request. Also keep
in mind that the <tt class="docutils literal"><span class="pre">options</span></tt> dict may differ, depending on the
<a class="reference internal" href="ec2nommerd.html#nommers"><em>Nommers</em></a> you&#8217;re using (see the
<a class="reference internal" href="ec2nommerd.html#nommers"><em>Nommer</em></a> docs for more details).</p>
<p>You&#8217;ll want to look at the
<a class="reference internal" href="apiref/conf.html#media_nommer.conf.settings.PRESETS" title="media_nommer.conf.settings.PRESETS"><tt class="xref py py-data docutils literal"><span class="pre">PRESETS</span></tt></a> setting for more
details on how this works. The documentation for the <a class="reference internal" href="ec2nommerd.html#nommers"><em>Nommer</em></a>
used in each preset determines what kind of values you can pass in the
<tt class="docutils literal"><span class="pre">options</span></tt> dict, so make sure you look them over as well.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Values provided to the API at submission time always take priority
over any directly conflicting default in a preset.</p>
</div>
</div>
<div class="section" id="starting-feederd">
<h2>Starting feederd<a class="headerlink" href="#starting-feederd" title="Permalink to this headline">¶</a></h2>
<p>You will now want to start <a class="reference internal" href="feederd.html"><em>feederd</em></a> using whatever init script or
init daemon you use. We have had good results with <a class="reference external" href="http://supervisord.org/">Supervisor</a>, but you can
use whatever you&#8217;re comfortable with. Make sure that the server running
<a class="reference internal" href="feederd.html"><em>feederd</em></a> is reachable by the machines that will be sending API requests
to start encoding jobs.</p>
</div>
<div class="section" id="using">
<h2>Using<a class="headerlink" href="#using" title="Permalink to this headline">¶</a></h2>
<p>From here, you&#8217;ll want to select and start using a <a class="reference internal" href="jsonapi.html#client-api-libraries"><em>Client API Libraries</em></a>.
These are what communicate with <a class="reference internal" href="feederd.html"><em>feederd</em></a>&#8216;s RESTful web API, and ultimately
help get stuff done.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#assumptions">Assumptions</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installing">Installing</a></li>
<li><a class="reference internal" href="#signing-up-for-aws">Signing up for AWS</a></li>
<li><a class="reference internal" href="#configuring">Configuring</a></li>
<li><a class="reference internal" href="#presets">Presets</a></li>
<li><a class="reference internal" href="#starting-feederd">Starting feederd</a></li>
<li><a class="reference internal" href="#using">Using</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">An Introduction to media-nommer</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="feederd.html"
                        title="next chapter">feederd</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="feederd.html" title="feederd"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="An Introduction to media-nommer"
             >previous</a> |</li>
        <li><a href="index.html">media-nommer v1.0dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, DUO Interactive, LLC.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>